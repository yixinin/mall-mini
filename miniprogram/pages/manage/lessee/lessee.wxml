<view class="container">
  <!-- åº—é“ºä¿¡æ¯å¡ç‰‡ -->
  <view class="shop-card">
    <image wx:if="{{shopInfo.logo}}" src="{{shopInfo.logo}}" class="shop-logo" />
    <view class="shop-info">
      <view class="shop-header">
        <text class="shop-name">{{shopInfo.name}}</text>
        <text class="shop-status {{shopInfo.status}}">
          {{shopInfo.status === 'active' ? 'è¥ä¸šä¸­' : shopInfo.status === 'inactive' ? 'å·²åœç”¨' : 'å¾…å®¡æ ¸'}}
        </text>
      </view>
      <view wx:if="{{shopInfo.address}}" class="shop-address">
        <text class="icon">ğŸ“</text>
        <text>{{shopInfo.address}}</text>
      </view>
    </view>
  </view>

  <!-- Tabæ  -->
  <view class="tabs">
    <view 
      wx:for="{{tabs}}" 
      wx:key="key" 
      class="tab {{activeTab === item.key ? 'active' : ''}}" 
      bindtap="switchTab" 
      data-tab="{{item.key}}"
    >
      <text>{{item.title}}</text>
    </view>
  </view>

  <!-- å†…å®¹åŒºåŸŸ -->
  <scroll-view 
    scroll-y 
    class="content" 
    refresher-enabled 
    refresher-triggered="{{refreshing}}" 
    bindrefresherrefresh="refreshData"
  >
    <!-- åº—å‘˜åˆ—è¡¨ -->
    <view wx:if="{{activeTab === 'tech'}}" class="tab-content">
      <view wx:if="{{techList.length === 0}}" class="empty-state">
        <text>æš‚æ— åº—å‘˜</text>
      </view>
      
      <view wx:for="{{techList}}" wx:key="userId" class="member-card">
        <image class="member-avatar" src="{{item.userInfo.avatar || '/images/default-avatar.png'}}" />
        <view class="member-info">
          <text class="member-name">{{item.userInfo.name}}</text>
          <view class="member-meta">
            <text class="member-phone">{{item.userInfo.phone || 'æœªå¡«å†™æ‰‹æœºå·'}}</text>
            <text class="member-join-date">åŠ å…¥äº {{item.joinDate}}</text>
          </view>
        </view>
        <button 
          wx:if="{{currentUser.role === 'system_admin' || currentUser.role === 'shop_admin'}}" 
          bindtap="removeMember" 
          data-user-id="{{item.userId}}"
          data-role="{{item.role}}"
          class="remove-btn"
        >
          ç§»é™¤
        </button>
      </view>
    </view>
    
    <!-- ç®¡ç†å‘˜åˆ—è¡¨ -->
    <view wx:if="{{activeTab === 'admins'}}" class="tab-content">
      <view wx:if="{{adminList.length === 0}}" class="empty-state">
        <text>æš‚æ— ç®¡ç†å‘˜</text>
      </view>
      
      <view wx:for="{{adminList}}" wx:key="userId" class="member-card admin">
        <image class="member-avatar" src="{{item.userInfo.avatar || '/images/default-avatar.png'}}" />
        <view class="member-info">
          <text class="member-name">{{item.userInfo.name}}</text>
          <view class="member-meta">
            <text class="member-email">{{item.userInfo.email || 'æœªå¡«å†™é‚®ç®±'}}</text>
            <text class="member-join-date">åŠ å…¥äº {{item.joinDate}}</text>
          </view>
        </view>
        <button 
          wx:if="{{currentUser.role === 'system_admin'}}" 
          bindtap="removeMember" 
          data-user-id="{{item.userId}}"
          data-role="{{item.role}}"
          class="remove-btn"
        >
          ç§»é™¤
        </button>
      </view>
    </view>
    
    <!-- ç”³è¯·åˆ—è¡¨ -->
    <view wx:if="{{activeTab === 'applications'}}" class="tab-content">
      <view wx:if="{{filteredApplications.length === 0}}" class="empty-state">
        <text>æš‚æ— å¾…å¤„ç†ç”³è¯·</text>
      </view>
      
      <view wx:for="{{filteredApplications}}" wx:key="id" class="application-card">
        <image class="applicant-avatar" src="{{item.userInfo.avatar || '/images/default-avatar.png'}}" />
        <view class="application-info">
          <text class="applicant-name">{{item.userInfo.name}}</text>
          <view class="application-meta">
            <text class="application-role">ç”³è¯·æˆä¸º{{item.desiredRole === 'shop_admin' ? 'ç®¡ç†å‘˜' : 'åº—å‘˜'}}</text>
            <text class="application-date">{{item.appliedAt}}</text>
          </view>
        </view>
        <view class="application-actions">
          <button 
            bindtap="handleApplication" 
            data-action="approve" 
            data-application-id="{{item.id}}"
            class="approve-btn"
          >
            é€šè¿‡
          </button>
          <button 
            bindtap="handleApplication" 
            data-action="reject" 
            data-application-id="{{item.id}}"
            class="reject-btn"
          >
            æ‹’ç»
          </button>
        </view>
      </view>
    </view>
  </scroll-view>
</view>